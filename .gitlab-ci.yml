  stages:
    - build
    - notify

    build-backend-code-job:
      stage: build
      only:
        - backend/*
      script:
        - cd backend
        - mvn package
      artifacts:
        paths:
          - sausage-store-0.0.1/sausage-store-0.0.1.jar

    build-frontend-code-job:
      stage: build
      only:
        - frontend/*
      script:
        - cd frontend
        - npm install
        - npm run build
      artifacts:
        paths:
          - frontend/dist/frontend

    telegram-notification-backend:
      stage: notify
      only:
        changes:
        - backend/*
        script:
        - sh '''
                    curl -X POST -H "Content-type: application/json" \
                    --data '{"chat_id":"-1001634310929", "text":"Valery sobral backend."}' \
                    "https://api.telegram.org/bot5933756043:AAE8JLL5KIzgrNBeTP5e-1bkbJy4YRoeGjs/sendMessage"
                '''
        needs:
        - build-backend-code-job

    telegram-notification-frontend:
      stage: notify
      only:
        changes:
        - frontend/*
        script: 
        - sh '''
                    curl -X POST -H "Content-type: application/json" \
                    --data '{"chat_id":"-1001634310929", "text":"Valery sobral frontend."}' \
                    "https://api.telegram.org/bot5933756043:AAE8JLL5KIzgrNBeTP5e-1bkbJy4YRoeGjs/sendMessage"
                '''
        needs:
        - build-frontend-code-job
